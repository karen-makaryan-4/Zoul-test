<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deep Link Redirect</title>
    <script>
      function redirectToApp() {
        const audioId = new URLSearchParams(window.location.search).get(
          'audioId'
        );
        if (audioId) {
          const appScheme = `zoul://?audioId=${audioId}`;
          const appStoreURL = 'https://apps.apple.com/app/id6502774439';
          const playStoreURL =
            'https://play.google.com/store/apps/details?id=com.zoul.app';

          const start = new Date().getTime();
          const timeoutDuration = 1500;

          window.location.href = appScheme;

          setTimeout(() => {
            if (new Date().getTime() - start < timeoutDuration) {
              window.location.href = /android/i.test(navigator.userAgent)
                ? playStoreURL
                : appStoreURL;
            }
          }, timeoutDuration);
        } else {
          window.location.href = 'https://www.zoul.app';
        }
      }
    </script>
  </head>
  <body onload="redirectToApp()">
    <p>Redirecting...</p>
  </body>
</html>
